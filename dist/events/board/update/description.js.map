{"version":3,"file":"description.js","sourceRoot":"/","sources":["events/board/update/description.ts"],"names":[],"mappings":";;;AAAA,wCAA2C;AAG9B,QAAA,KAAK,GAAkB;IAClC,IAAI,EAAE,mBAAmB;IACzB,KAAK,CAAC,OAAO,CAAC,IAAI;QAChB,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;QACtB,MAAM,KAAK,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,yBAAyB,CAAC,CAAC,CAAC,0BAA0B,CAAC;QACzI,OAAO,IAAI,CAAC,IAAI,CAAC;YACf,OAAO,EAAE;gBACP,KAAK,EAAE,CAAC,CAAC,KAAK,EAAE;oBACd,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,eAAe;oBACpC,KAAK,EAAE,IAAA,iBAAU,EAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,CAAC;iBACvC,CAAC;gBACF,WAAW,EAAE,EAAE;gBACf,MAAM,EAAE;oBACN;wBACE,IAAI,EAAE,GAAG,GAAG,CAAC,CAAC,iBAAiB,CAAC,GAAG,GAAG;wBACtC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,IAAA,iBAAU,EAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;wBACnE,MAAM,EAAE,IAAI;qBACb;oBACD;wBACE,IAAI,EAAE,GAAG,GAAG,CAAC,CAAC,iBAAiB,CAAC,GAAG,GAAG;wBACtC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,IAAA,iBAAU,EAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;wBAC/D,MAAM,EAAE,IAAI;qBACb;iBACF,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;aAC3B;YACD,KAAK,EAAE;gBACL,WAAW,EAAE,CAAC,CAAC,KAAK,EAAE;oBACpB,MAAM,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe,wBAAwB,IAAI,CAAC,OAAO,CAAC,QAAQ,0BAA0B;oBAC/G,KAAK,EAAE,IAAA,iBAAU,EAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,CAAC;iBACvC,CAAC;gBACF,MAAM,EAAE;oBACN;wBACE,IAAI,EAAE,GAAG,GAAG,CAAC,CAAC,iBAAiB,CAAC,GAAG,GAAG;wBACtC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,IAAA,iBAAU,EAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;wBACnE,MAAM,EAAE,IAAI;qBACb;oBACD;wBACE,IAAI,EAAE,GAAG,GAAG,CAAC,CAAC,iBAAiB,CAAC,GAAG,GAAG;wBACtC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,IAAA,iBAAU,EAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;wBAC/D,MAAM,EAAE,IAAI;qBACb;iBACF,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;aAC3B;SACF,CAAC,CAAC;IACL,CAAC;CACF,CAAC","sourcesContent":["import { cutoffText } from '../../../util';\nimport { EventFunction } from '../../../util/events';\n\nexport const event: EventFunction = {\n  name: 'UPDATE_BOARD_DESC',\n  async onEvent(data) {\n    const _ = data.locale;\n    const title = !data.oldData.desc ? 'webhooks.add_board_desc' : !data.board.desc ? 'webhooks.rem_board_desc' : 'webhooks.edit_board_desc';\n    return data.send({\n      default: {\n        title: _(title, {\n          member: data.invoker.webhookSafeName,\n          board: cutoffText(data.board.name, 50)\n        }),\n        description: '',\n        fields: [\n          {\n            name: '*' + _('trello.old_desc') + '*',\n            value: data.oldData.desc ? cutoffText(data.oldData.desc, 1024) : '',\n            inline: true\n          },\n          {\n            name: '*' + _('trello.new_desc') + '*',\n            value: data.board.desc ? cutoffText(data.board.desc, 1024) : '',\n            inline: true\n          }\n        ].filter((v) => !!v.value)\n      },\n      small: {\n        description: _(title, {\n          member: `[${data.invoker.webhookSafeName}](https://trello.com/${data.invoker.username}?utm_source=tacobot.app)`,\n          board: cutoffText(data.board.name, 50)\n        }),\n        fields: [\n          {\n            name: '*' + _('trello.old_desc') + '*',\n            value: data.oldData.desc ? cutoffText(data.oldData.desc, 1024) : '',\n            inline: true\n          },\n          {\n            name: '*' + _('trello.new_desc') + '*',\n            value: data.board.desc ? cutoffText(data.board.desc, 1024) : '',\n            inline: true\n          }\n        ].filter((v) => !!v.value)\n      }\n    });\n  }\n};\n"]}