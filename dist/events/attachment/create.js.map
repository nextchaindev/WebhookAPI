{"version":3,"file":"create.js","sourceRoot":"/","sources":["events/attachment/create.ts"],"names":[],"mappings":";;;AAAA,qCAA+D;AAGlD,QAAA,KAAK,GAAkB;IAClC,IAAI,EAAE,wBAAwB;IAC9B,KAAK,CAAC,OAAO,CAAC,IAAI;QAChB,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;QACtB,OAAO,IAAI,CAAC,IAAI,CAAC;YACf,OAAO,EAAE;gBACP,KAAK,EAAE,CAAC,CAAC,sBAAsB,EAAE;oBAC/B,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,eAAe;oBACpC,IAAI,EAAE,IAAA,iBAAU,EAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC;oBACpC,UAAU,EAAE,IAAA,iBAAU,EAAC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,EAAE,CAAC;iBACjD,CAAC;gBACF,WAAW,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC,YAAY,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;gBAClE,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,CAAC,4BAAqB,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI;aAC1H;YACD,KAAK,EAAE;gBACL,WAAW,EAAE,CAAC,CAAC,sBAAsB,EAAE;oBACrC,MAAM,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe,wBAAwB,IAAI,CAAC,OAAO,CAAC,QAAQ,0BAA0B;oBAC/G,IAAI,EAAE,IAAI,IAAA,iBAAU,EAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,0BAA0B,IAAI,CAAC,IAAI,CAAC,SAAS,0BAA0B;oBAC/G,UAAU,EAAE,IAAA,iBAAU,EAAC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,EAAE,CAAC;iBACjD,CAAC;gBACF,SAAS,EAAE,IAAI,CAAC,UAAU,CAAC,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,CAAC,4BAAqB,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI;aAC9H;SACF,CAAC,CAAC;IACL,CAAC;CACF,CAAC","sourcesContent":["import { cutoffText, IMAGE_ATTACHMENT_HOST } from '../../util';\nimport { EventFunction } from '../../util/events';\n\nexport const event: EventFunction = {\n  name: 'ADD_ATTACHMENT_TO_CARD',\n  async onEvent(data) {\n    const _ = data.locale;\n    return data.send({\n      default: {\n        title: _('webhooks.attach_card', {\n          member: data.invoker.webhookSafeName,\n          card: cutoffText(data.card.name, 50),\n          attachment: cutoffText(data.attachment.name, 50)\n        }),\n        description: data.embedDescription(['attachment', 'card', 'list']),\n        image: data.attachment.url && data.attachment.url.startsWith(IMAGE_ATTACHMENT_HOST) ? { url: data.attachment.url } : null\n      },\n      small: {\n        description: _('webhooks.attach_card', {\n          member: `[${data.invoker.webhookSafeName}](https://trello.com/${data.invoker.username}?utm_source=tacobot.app)`,\n          card: `[${cutoffText(data.card.name, 25)}](https://trello.com/c/${data.card.shortLink}?utm_source=tacobot.app)`,\n          attachment: cutoffText(data.attachment.name, 25)\n        }),\n        thumbnail: data.attachment.url && data.attachment.url.startsWith(IMAGE_ATTACHMENT_HOST) ? { url: data.attachment.url } : null\n      }\n    });\n  }\n};\n"]}