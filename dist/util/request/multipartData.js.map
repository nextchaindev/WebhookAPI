{"version":3,"file":"multipartData.js","sourceRoot":"/","sources":["util/request/multipartData.ts"],"names":[],"mappings":";;AAAA,MAAM,aAAa;IAAnB;QACE,aAAQ,GAAG,gCAAgC,CAAC;QAC5C,SAAI,GAAa,EAAE,CAAC;IAwBtB,CAAC;IAtBC,MAAM,CAAC,SAAiB,EAAE,IAAS,EAAE,QAAiB;QACpD,IAAI,IAAI,KAAK,SAAS,EAAE;YACtB,OAAO;SACR;QACD,IAAI,GAAG,GAAG,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,4CAA4C,GAAG,SAAS,GAAG,GAAG,CAAC;QACpG,IAAI,QAAQ;YAAE,GAAG,IAAI,cAAc,GAAG,QAAQ,GAAG,GAAG,CAAC;QACrD,IAAI,IAAI,YAAY,MAAM,EAAE;YAC1B,GAAG,IAAI,4CAA4C,CAAC;SACrD;aAAM,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;YACnC,GAAG,IAAI,oCAAoC,CAAC;YAC5C,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;SAC1C;aAAM;YACL,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,CAAC;SAC/B;QACD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,GAAG,UAAU,CAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACvB,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC;QAC7D,OAAO,IAAI,CAAC,IAAI,CAAC;IACnB,CAAC;CACF;AAED,kBAAe,aAAa,CAAC","sourcesContent":["class MultipartData {\n  boundary = '----------------TacoWebhookAPI';\n  bufs: Buffer[] = [];\n\n  attach(fieldName: string, data: any, filename?: string) {\n    if (data === undefined) {\n      return;\n    }\n    let str = '\\r\\n--' + this.boundary + '\\r\\nContent-Disposition: form-data; name=\"' + fieldName + '\"';\n    if (filename) str += '; filename=\"' + filename + '\"';\n    if (data instanceof Buffer) {\n      str += '\\r\\nContent-Type: application/octet-stream';\n    } else if (typeof data === 'object') {\n      str += '\\r\\nContent-Type: application/json';\n      data = Buffer.from(JSON.stringify(data));\n    } else {\n      data = Buffer.from('' + data);\n    }\n    this.bufs.push(Buffer.from(str + '\\r\\n\\r\\n'));\n    this.bufs.push(data);\n  }\n\n  finish() {\n    this.bufs.push(Buffer.from('\\r\\n--' + this.boundary + '--'));\n    return this.bufs;\n  }\n}\n\nexport default MultipartData;\n"]}